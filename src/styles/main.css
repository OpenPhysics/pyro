/* =====================================================
   Pyro – VPython Browser Editor  (CSS)
   =====================================================
   Sections:
     1. Reset & base
     2. Accessibility utilities
     3. Sidebar
     4. Header
     5. Controls / buttons
     6. Main layout & panels
     7. Resizable gutter
     8. Editor / CodeMirror overrides
     9. Output & GlowScript canvas
    10. Console panel
    11. Error display
    12. Loading indicator
    13. Save notification
    14. CodeMirror autocomplete theming
    15. Keyboard shortcuts dialog
    16. Snippets dialog
    17. Projector (light) mode overrides
    18. Responsive
   ===================================================== */

/* ----- 1. Reset & base ----- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background-color: #1e1e1e;
  color: #e0e0e0;
  overflow: hidden;
}

/* ----- 2. Accessibility utilities ----- */

/* Screen reader only — visually hidden but accessible */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Skip navigation link */
.skip-nav {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  padding: 0.75rem 1.5rem;
  background-color: #007acc;
  color: #fff;
  font-size: 0.9rem;
  font-weight: 600;
  text-decoration: none;
  border-radius: 0 0 6px 6px;
  transition: top 0.2s ease;
}

.skip-nav:focus {
  top: 0;
  outline: 2px solid #fff;
  outline-offset: 2px;
}

/* Focus-visible outlines for keyboard navigation */
*:focus-visible {
  outline: 2px solid #007acc;
  outline-offset: 2px;
}

/* Remove focus outline for mouse users */
*:focus:not(:focus-visible) {
  outline: none;
}

/* ----- 3. Sidebar ----- */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 220px;
  background-color: #181818;
  border-right: 1px solid #333;
  display: flex;
  flex-direction: column;
  z-index: 100;
  transition: width 0.25s ease, box-shadow 0.25s ease;
  overflow: hidden;
}

.sidebar.collapsed {
  width: 48px;
}

.sidebar-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: none;
  border: none;
  color: #aaa;
  cursor: pointer;
  flex-shrink: 0;
  border-radius: 0;
  transition: color 0.15s;
}

.sidebar-toggle:hover {
  color: #fff;
  background-color: #292929;
  transform: none;
}

.sidebar-nav {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 1rem;
}

.sidebar-section-label {
  padding: 0.6rem 0.75rem 0.2rem;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #666;
  white-space: nowrap;
  overflow: hidden;
}

.sidebar.collapsed .sidebar-section-label {
  opacity: 0;
  height: 0;
  padding: 0;
}

.sidebar-divider {
  height: 1px;
  background-color: #2a2a2a;
  margin: 0.4rem 0.6rem;
}

.sidebar.collapsed .sidebar-divider {
  margin: 0.4rem 0.25rem;
}

.sidebar-btn {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  width: 100%;
  padding: 0.5rem 0.75rem;
  background: none;
  border: none;
  color: #bbb;
  font-size: 0.8rem;
  text-align: left;
  cursor: pointer;
  white-space: nowrap;
  overflow: hidden;
  border-radius: 0;
  transition: background-color 0.15s, color 0.15s;
}

.sidebar-btn:hover {
  background-color: #292929;
  color: #fff;
  transform: none;
}

.sidebar-btn.active {
  background-color: #094771;
  color: #fff;
}

.sidebar-btn .sidebar-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 20px;
  height: 20px;
}

.sidebar-btn .sidebar-label {
  overflow: hidden;
  text-overflow: ellipsis;
}

.sidebar.collapsed .sidebar-label {
  display: none;
}

/* Run / Stop colour accents */
.sidebar-btn.sidebar-run .sidebar-icon { color: #4caf50; }
.sidebar-btn.sidebar-run:hover .sidebar-icon { color: #69f0ae; }
.sidebar-btn.sidebar-stop .sidebar-icon { color: #f44336; }
.sidebar-btn.sidebar-stop:hover .sidebar-icon { color: #ff8a80; }

/* ---- Page wrapper offset by sidebar width ---- */
#app-wrapper {
  margin-left: 48px;
  height: 100vh;
  display: flex;
  flex-direction: column;
  transition: margin-left 0.25s ease;
}

.sidebar:not(.collapsed) ~ #app-wrapper {
  margin-left: 220px;
}

/* ----- 4. Header ----- */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 1rem;
  background-color: #2d2d2d;
  border-bottom: 1px solid #404040;
  height: 50px;
  flex-shrink: 0;
}

header h1 {
  font-size: 1.2rem;
  font-weight: 500;
  color: #ffffff;
}

/* ----- 5. Controls / buttons ----- */
.controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

button, select {
  padding: 0.4rem 0.75rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 500;
  transition: background-color 0.2s, transform 0.1s;
}

button:hover:not(:disabled) {
  transform: translateY(-1px);
}

button:active:not(:disabled) {
  transform: translateY(0);
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

select {
  background-color: #3c3c3c;
  color: #e0e0e0;
  border: 1px solid #555;
  cursor: pointer;
}

select:hover { background-color: #4a4a4a; }
select:focus { outline: none; border-color: #007acc; }

/* View mode button group */
.view-mode-group {
  display: flex;
  gap: 0;
  border: 1px solid #555;
  border-radius: 4px;
  overflow: hidden;
}

.view-mode-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 30px;
  padding: 0;
  background-color: #3c3c3c;
  color: #aaa;
  border: none;
  border-right: 1px solid #555;
  border-radius: 0;
  cursor: pointer;
  transition: background-color 0.15s, color 0.15s;
}

.view-mode-btn:last-child {
  border-right: none;
}

.view-mode-btn:hover {
  background-color: #4a4a4a;
  color: #fff;
  transform: none;
}

.view-mode-btn.active {
  background-color: #007acc;
  color: #fff;
}


/* ----- 6. Main layout & panels ----- */
main {
  display: flex;
  flex: 1;
  overflow: hidden;
  background-color: #1e1e1e;
}

.panel {
  display: flex;
  flex-direction: column;
  background-color: #252526;
  overflow: hidden;
}

.editor-panel { flex: 1; min-width: 200px; }
.output-panel { flex: 1; min-width: 200px; position: relative; }

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.4rem 0.8rem;
  background-color: #2d2d2d;
  font-size: 0.85rem;
  color: #888;
  border-bottom: 1px solid #404040;
}

/* View mode: code only */
main.view-code-only .output-panel,
main.view-code-only .gutter {
  display: none;
}

/* View mode: output only */
main.view-output-only .editor-panel,
main.view-output-only .gutter {
  display: none;
}

/* ----- 7. Resizable gutter ----- */
.gutter {
  width: 6px;
  background-color: #1e1e1e;
  cursor: col-resize;
  transition: background-color 0.2s;
}

.gutter:hover,
.gutter.dragging {
  background-color: #007acc;
}

.gutter:focus-visible {
  background-color: #007acc;
}

/* ----- 8. Editor / CodeMirror ----- */
#editor { flex: 1; overflow: auto; }
.cm-editor { height: 100%; font-size: 14px; }
.cm-scroller { overflow: auto; }

/* ----- 9. Output & GlowScript canvas ----- */
#output {
  flex: 1;
  background-color: #1a1a1a;
  overflow: hidden;
  position: relative;
}

#output canvas { display: block; width: 100% !important; height: 100% !important; }
#output .glowscript { width: 100%; height: 100%; }

/* ----- 10. Console panel ----- */
.console-toggle {
  padding: 0.2rem 0.5rem;
  font-size: 0.75rem;
  background-color: #3c3c3c;
  color: #aaa;
  border: 1px solid #555;
}

.console-toggle:hover { background-color: #4a4a4a; color: #fff; }
.console-toggle.active { background-color: #007acc; color: white; border-color: #007acc; }

#console-panel {
  display: none;
  flex-direction: column;
  height: 150px;
  background-color: #1a1a1a;
  border-top: 1px solid #404040;
}

#console-panel.visible { display: flex; }

.console-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.3rem 0.5rem;
  background-color: #252526;
  font-size: 0.75rem;
  color: #888;
  border-bottom: 1px solid #333;
}

.console-header button {
  padding: 0.15rem 0.4rem;
  font-size: 0.7rem;
  background-color: #3c3c3c;
  color: #aaa;
}

.console-header button:hover { background-color: #4a4a4a; color: #fff; }

#console-output {
  flex: 1;
  overflow: auto;
  padding: 0.5rem;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 0.8rem;
  color: #b0b0b0;
}

#console-output .log-line {
  padding: 2px 0;
  border-bottom: 1px solid #2a2a2a;
}

#console-output .log-line:last-child { border-bottom: none; }

/* ----- 11. Error display ----- */
#error-display {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  max-height: 30%;
  overflow: auto;
  background-color: rgba(30, 30, 30, 0.95);
  color: #ff6b6b;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 0.85rem;
  padding: 0.5rem;
  border-top: 1px solid #ff6b6b;
  display: none;
  z-index: 10;
}

#error-display.visible { display: block; }
#error-display pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; }

/* ----- 12. Loading indicator ----- */
.loading {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  color: #888;
  font-size: 0.9rem;
}

/* ----- 13. Save notification ----- */
.save-notification {
  position: fixed;
  top: 60px; right: 20px;
  padding: 0.75rem 1.25rem;
  background-color: #4caf50;
  color: white;
  border-radius: 4px;
  font-size: 0.9rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  animation: slideIn 0.3s ease, fadeOut 0.3s ease 1.7s forwards;
  z-index: 1000;
}

@keyframes slideIn {
  from { transform: translateX(100%); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}

@keyframes fadeOut {
  to { opacity: 0; }
}

/* ----- 14. CodeMirror autocomplete ----- */
.cm-tooltip-autocomplete {
  background-color: #252526 !important;
  border: 1px solid #404040 !important;
  border-radius: 4px !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
}

.cm-tooltip-autocomplete > ul { font-family: 'Consolas', 'Monaco', monospace !important; font-size: 13px !important; }
.cm-tooltip-autocomplete > ul > li { padding: 4px 8px !important; color: #e0e0e0 !important; }
.cm-tooltip-autocomplete > ul > li[aria-selected="true"] { background-color: #094771 !important; color: #ffffff !important; }
.cm-tooltip-autocomplete > ul > li:hover { background-color: #2a2d2e !important; }

.cm-completionLabel { color: #e0e0e0 !important; }
.cm-completionDetail { color: #888 !important; font-style: italic; margin-left: 8px; }
.cm-completionInfo { background-color: #1e1e1e !important; border: 1px solid #404040 !important; color: #b0b0b0 !important; padding: 8px !important; font-size: 12px !important; }

.cm-completionIcon-function::after { content: '\0192'; color: #dcdcaa; }
.cm-completionIcon-keyword::after  { content: '\25C6'; color: #569cd6; }
.cm-completionIcon-constant::after { content: '\25CF'; color: #4ec9b0; }
.cm-completionIcon-property::after { content: '\25CB'; color: #9cdcfe; }
.cm-completionIcon-variable::after { content: '\25C7'; color: #9cdcfe; }
.cm-completionIcon-class::after    { content: '\25C8'; color: #4ec9b0; }

/* ----- 15. Keyboard shortcuts dialog ----- */
.shortcuts-overlay {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 2000;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(2px);
  justify-content: center;
  align-items: center;
}

.shortcuts-overlay.visible {
  display: flex;
}

.shortcuts-dialog {
  background-color: #252526;
  border: 1px solid #404040;
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  width: 420px;
  max-width: 90vw;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.shortcuts-dialog-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.25rem;
  border-bottom: 1px solid #404040;
  background-color: #2d2d2d;
}

.shortcuts-dialog-header h2 {
  font-size: 1rem;
  font-weight: 600;
  color: #e0e0e0;
  margin: 0;
}

.shortcuts-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: none;
  border: none;
  color: #888;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.15s, color 0.15s;
}

.shortcuts-close-btn:hover {
  background-color: #3c3c3c;
  color: #fff;
}

.shortcuts-dialog-body {
  padding: 1rem 1.25rem;
  overflow-y: auto;
}

.shortcuts-group {
  margin-bottom: 1.25rem;
}

.shortcuts-group:last-child {
  margin-bottom: 0;
}

.shortcuts-group h3 {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #888;
  margin-bottom: 0.5rem;
}

.shortcuts-list {
  margin: 0;
}

.shortcut-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.4rem 0;
  border-bottom: 1px solid #2a2a2a;
}

.shortcut-row:last-child {
  border-bottom: none;
}

.shortcut-row dt {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.shortcut-row dd {
  color: #bbb;
  font-size: 0.85rem;
  margin: 0;
}

.shortcut-row kbd {
  display: inline-block;
  padding: 0.2rem 0.5rem;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 0.8rem;
  color: #e0e0e0;
  background-color: #3c3c3c;
  border: 1px solid #555;
  border-radius: 3px;
  min-width: 1.5rem;
  text-align: center;
  box-shadow: 0 1px 0 #222;
}

.shortcut-plus {
  color: #666;
  font-size: 0.75rem;
  padding: 0 0.1rem;
}

/* ----- 16. Snippets dialog ----- */
.snippets-overlay {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 2000;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(2px);
  justify-content: center;
  align-items: center;
}

.snippets-overlay.visible {
  display: flex;
}

.snippets-dialog {
  background-color: #252526;
  border: 1px solid #404040;
  border-radius: 8px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  width: 520px;
  max-width: 90vw;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.snippets-dialog-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.25rem;
  border-bottom: 1px solid #404040;
  background-color: #2d2d2d;
}

.snippets-dialog-header h2 {
  font-size: 1rem;
  font-weight: 600;
  color: #e0e0e0;
  margin: 0;
}

.snippets-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: none;
  border: none;
  color: #888;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.15s, color 0.15s;
}

.snippets-close-btn:hover {
  background-color: #3c3c3c;
  color: #fff;
}

.snippets-dialog-body {
  padding: 1rem 1.25rem;
  overflow-y: auto;
}

.snippets-save-section {
  margin-bottom: 1.25rem;
}

.snippets-save-section h3,
.snippets-list-section h3 {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #888;
  margin-bottom: 0.5rem;
}

.snippets-save-form {
  display: flex;
  gap: 0.5rem;
}

.snippets-save-form input {
  flex: 1;
  padding: 0.45rem 0.65rem;
  font-size: 0.85rem;
  border: 1px solid #555;
  border-radius: 4px;
  background-color: #1e1e1e;
  color: #e0e0e0;
  outline: none;
  transition: border-color 0.15s;
}

.snippets-save-form input:focus {
  border-color: #007acc;
}

.snippets-save-form input::placeholder {
  color: #666;
}

.snippets-save-btn {
  padding: 0.45rem 1rem;
  font-size: 0.85rem;
  font-weight: 500;
  background-color: #007acc;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.15s;
}

.snippets-save-btn:hover {
  background-color: #0098ff;
  transform: none;
}

.snippets-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-height: 350px;
  overflow-y: auto;
}

.snippets-empty {
  color: #666;
  font-size: 0.85rem;
  font-style: italic;
  padding: 1rem 0;
  text-align: center;
}

.snippet-row {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  padding: 0.65rem 0.75rem;
  background-color: #1e1e1e;
  border: 1px solid #333;
  border-radius: 6px;
  transition: border-color 0.15s;
}

.snippet-row:hover {
  border-color: #555;
}

.snippet-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.snippet-name {
  font-size: 0.9rem;
  font-weight: 500;
  color: #e0e0e0;
}

.snippet-date {
  font-size: 0.7rem;
  color: #666;
}

.snippet-preview {
  max-height: 52px;
  overflow: hidden;
  border-radius: 3px;
  background-color: #181818;
  padding: 0.3rem 0.5rem;
}

.snippet-preview pre {
  margin: 0;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 0.7rem;
  color: #888;
  white-space: pre;
  overflow: hidden;
  text-overflow: ellipsis;
}

.snippet-actions {
  display: flex;
  gap: 0.4rem;
  justify-content: flex-end;
}

.snippet-load-btn,
.snippet-delete-btn {
  padding: 0.3rem 0.7rem;
  font-size: 0.75rem;
  font-weight: 500;
  border: none;
  border-radius: 3px;
  cursor: pointer;
  transition: background-color 0.15s, color 0.15s;
}

.snippet-load-btn {
  background-color: #094771;
  color: #b3d9ff;
}

.snippet-load-btn:hover {
  background-color: #007acc;
  color: #fff;
  transform: none;
}

.snippet-delete-btn {
  background-color: #3c2020;
  color: #ff8a80;
}

.snippet-delete-btn:hover {
  background-color: #5c2020;
  color: #fff;
  transform: none;
}

/* ----- 17. Projector (light) mode ----- */
body.projector-mode {
  background-color: #f5f5f5;
  color: #222;
}

body.projector-mode .sidebar {
  background-color: #e8e8e8;
  border-right-color: #ccc;
}

body.projector-mode .sidebar-toggle { color: #555; }
body.projector-mode .sidebar-toggle:hover { color: #000; background-color: #ddd; }
body.projector-mode .sidebar-section-label { color: #888; }
body.projector-mode .sidebar-divider { background-color: #d0d0d0; }
body.projector-mode .sidebar-btn { color: #444; }
body.projector-mode .sidebar-btn:hover { background-color: #ddd; color: #000; }
body.projector-mode .sidebar-btn.active { background-color: #b3d9ff; color: #003d7a; }

body.projector-mode header { background-color: #e0e0e0; border-bottom-color: #ccc; }
body.projector-mode header h1 { color: #222; }

body.projector-mode main { background-color: #f5f5f5; }
body.projector-mode .panel { background-color: #fff; }
body.projector-mode .panel-header { background-color: #eaeaea; color: #555; border-bottom-color: #ccc; }
body.projector-mode .gutter { background-color: #ddd; }
body.projector-mode .gutter:hover,
body.projector-mode .gutter.dragging { background-color: #007acc; }
body.projector-mode #output { background-color: #fafafa; }
body.projector-mode #console-panel { background-color: #fafafa; border-top-color: #ccc; }
body.projector-mode .console-header { background-color: #eee; color: #555; border-bottom-color: #ddd; }
body.projector-mode #console-output { color: #333; }
body.projector-mode #console-output .log-line { border-bottom-color: #eee; }

body.projector-mode .view-mode-group { border-color: #bbb; }
body.projector-mode .view-mode-btn { background-color: #e0e0e0; color: #555; border-right-color: #bbb; }
body.projector-mode .view-mode-btn:hover { background-color: #d0d0d0; color: #000; }
body.projector-mode .view-mode-btn.active { background-color: #007acc; color: #fff; }

body.projector-mode select { background-color: #e0e0e0; color: #333; border-color: #bbb; }
body.projector-mode select:hover { background-color: #d0d0d0; }
body.projector-mode .console-toggle { background-color: #e0e0e0; color: #555; border-color: #bbb; }
body.projector-mode .console-toggle:hover { background-color: #d0d0d0; color: #000; }
body.projector-mode .console-toggle.active { background-color: #007acc; color: #fff; border-color: #007acc; }
body.projector-mode .console-header button { background-color: #e0e0e0; color: #555; }
body.projector-mode .console-header button:hover { background-color: #d0d0d0; color: #000; }

body.projector-mode .loading { color: #888; }

body.projector-mode #error-display { background-color: rgba(255,240,240,0.95); color: #c00; border-top-color: #c00; }

/* Projector editor (CodeMirror light theme) overrides */
body.projector-mode .cm-editor {
  background-color: #fff;
}
body.projector-mode .cm-gutters {
  background-color: #f5f5f5;
  border-right-color: #ddd;
  color: #999;
}
body.projector-mode .cm-activeLineGutter {
  background-color: #e8f0fe;
}
body.projector-mode .cm-activeLine {
  background-color: #f0f4ff;
}
body.projector-mode .cm-cursor {
  border-left-color: #333;
}
body.projector-mode .cm-selectionBackground {
  background-color: #b3d9ff !important;
}
body.projector-mode .cm-matchingBracket {
  background-color: #c8e6c9;
  color: #222 !important;
}

/* Projector autocomplete overrides */
body.projector-mode .cm-tooltip-autocomplete { background-color: #fff !important; border-color: #ccc !important; }
body.projector-mode .cm-tooltip-autocomplete > ul > li { color: #333 !important; }
body.projector-mode .cm-tooltip-autocomplete > ul > li[aria-selected="true"] { background-color: #b3d9ff !important; color: #000 !important; }
body.projector-mode .cm-tooltip-autocomplete > ul > li:hover { background-color: #eee !important; }
body.projector-mode .cm-completionLabel { color: #333 !important; }
body.projector-mode .cm-completionDetail { color: #777 !important; }
body.projector-mode .cm-completionInfo { background-color: #f9f9f9 !important; border-color: #ccc !important; color: #444 !important; }

/* Projector shortcuts dialog overrides */
body.projector-mode .shortcuts-overlay {
  background-color: rgba(0, 0, 0, 0.3);
}
body.projector-mode .shortcuts-dialog {
  background-color: #fff;
  border-color: #ccc;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}
body.projector-mode .shortcuts-dialog-header {
  background-color: #f0f0f0;
  border-bottom-color: #ccc;
}
body.projector-mode .shortcuts-dialog-header h2 {
  color: #222;
}
body.projector-mode .shortcuts-close-btn { color: #555; }
body.projector-mode .shortcuts-close-btn:hover { background-color: #e0e0e0; color: #000; }
body.projector-mode .shortcuts-group h3 { color: #666; }
body.projector-mode .shortcut-row { border-bottom-color: #eee; }
body.projector-mode .shortcut-row dd { color: #444; }
body.projector-mode .shortcut-row kbd {
  color: #222;
  background-color: #f0f0f0;
  border-color: #ccc;
  box-shadow: 0 1px 0 #ddd;
}
body.projector-mode .shortcut-plus { color: #999; }

/* Projector snippets dialog overrides */
body.projector-mode .snippets-overlay {
  background-color: rgba(0, 0, 0, 0.3);
}
body.projector-mode .snippets-dialog {
  background-color: #fff;
  border-color: #ccc;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}
body.projector-mode .snippets-dialog-header {
  background-color: #f0f0f0;
  border-bottom-color: #ccc;
}
body.projector-mode .snippets-dialog-header h2 { color: #222; }
body.projector-mode .snippets-close-btn { color: #555; }
body.projector-mode .snippets-close-btn:hover { background-color: #e0e0e0; color: #000; }
body.projector-mode .snippets-save-section h3,
body.projector-mode .snippets-list-section h3 { color: #666; }
body.projector-mode .snippets-save-form input {
  background-color: #f5f5f5;
  border-color: #ccc;
  color: #222;
}
body.projector-mode .snippets-save-form input::placeholder { color: #999; }
body.projector-mode .snippets-save-form input:focus { border-color: #007acc; }
body.projector-mode .snippet-row {
  background-color: #f5f5f5;
  border-color: #ddd;
}
body.projector-mode .snippet-row:hover { border-color: #bbb; }
body.projector-mode .snippet-name { color: #222; }
body.projector-mode .snippet-date { color: #888; }
body.projector-mode .snippet-preview { background-color: #eee; }
body.projector-mode .snippet-preview pre { color: #555; }
body.projector-mode .snippets-empty { color: #888; }
body.projector-mode .snippet-load-btn { background-color: #b3d9ff; color: #003d7a; }
body.projector-mode .snippet-load-btn:hover { background-color: #007acc; color: #fff; }
body.projector-mode .snippet-delete-btn { background-color: #ffe0e0; color: #c00; }
body.projector-mode .snippet-delete-btn:hover { background-color: #ffb3b3; color: #800; }

/* Projector focus-visible */
body.projector-mode *:focus-visible {
  outline-color: #007acc;
}

/* Projector skip-nav */
body.projector-mode .skip-nav {
  background-color: #007acc;
  color: #fff;
}

/* ----- 18. Responsive ----- */
@media (max-width: 768px) {
  .sidebar { width: 48px !important; }
  .sidebar.collapsed { width: 48px; }
  .sidebar:not(.collapsed) { width: 48px; }
  #app-wrapper { margin-left: 48px !important; }

  main { flex-direction: column; }

  .editor-panel,
  .output-panel {
    flex: none;
    height: calc(50% - 3px);
    min-width: unset;
  }

  .gutter { width: 100%; height: 6px; cursor: row-resize; }

  header { flex-wrap: wrap; height: auto; padding: 0.5rem; gap: 0.5rem; }
  header h1 { width: 100%; text-align: center; font-size: 1rem; }
  .controls { width: 100%; justify-content: center; flex-wrap: wrap; }
  select, button { font-size: 0.75rem; padding: 0.35rem 0.5rem; }

  .shortcuts-dialog { width: 95vw; }
}
